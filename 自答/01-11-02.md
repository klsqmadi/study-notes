# http协议的特点
- 简单，通过url来定位资源
- 无状态，对事务的处理并没有记忆能力，
- 允许传输任何类型的数据，标记Content-type
- c/s，请求/应答模式

# http的数据格式
- 请求报文
  - 请求行，http协议版本，请求方法，url
  - 请求头
  - 空行
  - 请求体

- 响应报文
  - 请求行，http协议版本，状态码，状态码描述
  - 响应头
  - 空行
  - 响应体

# forward和redirect区别
- forward是服务器根据url，由服务器去访问目标url，获取到url返回的内容，然后通过服务器将内容返回给浏览器，浏览器根本不知道这些内容是从哪里来的，所以他的url还是原来的url，可以共享原来的request数据
- redirect是服务器根据逻辑，发送一个302状态码给浏览器，告诉浏览器去请求这个新的地址，所以地址显示的是新的地址，不能共享

# http0.9/1.0/1.1/2.0/3.0
- http0.9只要简单的get请求，只能传输简单文本，采用短连接的方式，就是每进行一次http连接，都会建立一次连接，任务结束就中断连接
- http1.0新增了post，head方法，引入首部，状态码，响应码，重定向，缓存，压缩，问题：短连接，在获取完资源就断开连接，每一次需要获取新的资源都会重新建立连接，传输效率低
- http1.1默认长连接，带宽优化断点续传range，content-range，动态内容传输transfer-encoding：chunked， 使用管道传输，在同一个tcp连接中可以发送多个http请求，引入虚拟机，host域，问题：队头阻塞，进而导致需要建立多个tcp连接，甚至通过CDN域名分片，利用多个域名来建立多个连接，多个连接会竞争带宽，而且多个连接会带来慢启动的
- http2.0引入多路复用，可以同时并行发送多个请求，为了区分多个请求，使用二进制分帧，为每个流增加一个stream id来区别，为了关键资源优先加载，引入资源优先级，在同一个tcp中，头部相同冗余，引入头部压缩，还可以进行服务器推送，问题：还是会带来数据包级别的队头阻塞，tcp握手+tls握手的时延
- http3.0产生原因：因为如果改造tcp协议中间设备僵化，操作系统讲话，那么只要使用udp协议了，使用quic协议，基于udp实现tcp+tls，多路数据流

# https
- 客户端去请求服务器的443端口，首先服务器必须拥有CA证书，CA证书由CA组织签发，里面包含服务器的公钥和数字签名
- 服务器收到客户端的请求，将证书发送给客户端，客户端对其证书解析，首先发现该证书不是根证书，会找到该证书的根证书，用预先存好的根证书的公钥将证书的数字签名解密，然后和经过hash算法生成的hash值对比，如果一样则证明证书安全，然后用证明过的证书里面的公钥去校验服务器的证书，如果安全，取出证书里的公钥，客户端还会生成一个随机key，用公钥加密后，发送给服务器，服务器用私钥解密客户端发送的数据，得到key，之后双方就用这个key进行加密解密